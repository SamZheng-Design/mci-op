# 🎤 演唱会票房预测器 - Comparable模型

## 项目概述
- **名称**: Concert Box Office Predictor（演唱会票房预测器）
- **目标**: 基于 Comparable 模型预测欧美明星在中国内地演唱会的票房
- **技术栈**: Hono + TypeScript + TailwindCSS + OpenAI API

## 🔗 访问地址
- **开发环境**: https://3000-izq3mrszxyfa466deoq63-5185f4aa.sandbox.novita.ai

## 🎯 核心功能

### 1. 演唱会票房预测入口（新）
整合的一站式预测入口，包含：
- **艺人数据输入区**（放在最上面）：输入百度指数、网易云粉丝、小红书粉丝等数据
- **城市级别选择**：可选择一线/二线/三线城市作为预测目标
- **模型参数配置区**（放在下面）：可调整权重、LC参数、城市溢价系数等

### 2. 动态参数管理
- **增加/减少权重参数**：支持动态添加或删除评估维度（如抖音粉丝、微博热度等）
- **增加/减少锚点数据**：支持动态添加或删除Benchmark锚点艺人
- **实时保存到本地存储**

### 3. 城市级别溢价系统
新的三级城市溢价系统，每级城市都有独立的保守/中性/激进系数：
- **一线城市**（深圳/杭州/上海/北京）：默认 1.15/1.25/1.35
- **二线城市**（成都/武汉/南京/西安）：默认 0.95/1.05/1.15
- **三线城市**（长沙/郑州/济南/青岛）：默认 0.85/0.95/1.05

### 4. AI智能预测
输入任意欧美艺人名称，AI自动分析并预测票房
- 使用 OpenAI GPT 分析艺人热度数据
- 自动估算百度指数、网易云粉丝、小红书粉丝
- 输出保守/中性/激进三档票房预测

### 5. Cardi B案例讲解
完整展示 Comparable 模型的6步计算过程
- Step A: 归一化（Normalization）
- Step B: 需求指数D（Demand Index）
- Step C: 转化率LC（Live Conversion）
- Step D: 出票指数F（Final Index）
- Step E: 多锚点校准（Comparable）
- Step F: 城市溢价

## 📊 测算模型逻辑

```
Normalization → D → LC → F → 多锚点 → 城市溢价
```

### Step A: 归一化
```
x' = x / max(x)
```

### Step B: 需求指数 D
```
D = Σ(权重i × 维度i')
```
支持动态权重配置

### Step C: 转化率 LC
```
LC = clip(常数 + 网易云系数×网易云' + 小红书系数×小红书', min, max)
```

### Step D: 出票指数 F
```
F = D × LC
```

### Step E: 多锚点校准
```
对每个锚点:
  ratio = F_目标 / F_锚点
  三线票房 = 锚点票房 × ratio
```
支持动态锚点配置

### Step F: 城市溢价
```
根据目标城市级别应用对应溢价系数：
  保守 = min(三线票房) × 保守系数
  中性 = avg(三线票房) × 中性系数
  激进 = max(三线票房) × 激进系数
```

## 📡 API 接口

### 健康检查
```
GET /api/health
```

### 获取默认参数
```
GET /api/params/default
```

### 手动计算
```
POST /api/calculate
Body: {
  "artistData": { "baidu": 388, "netease": 80.6, "xhs": 82 },
  "targetTier": "tier1",  // tier1/tier2/tier3
  "customParams": { ... }  // 可选
}
```

### Cardi B 案例
```
GET /api/demo/cardib
```

### AI分析预测
```
POST /api/ai/analyze
Body: {
  "artistName": "Drake",
  "apiKey": "sk-..."  // 可选
}
```

## 🛠️ 开发指南

### 本地开发
```bash
cd webapp
npm run build
npm run dev:sandbox
```

### 部署到 Cloudflare Pages
```bash
npm run deploy
```

## 📋 Benchmark数据（默认）

| 艺人 | 百度指数 | 网易云粉丝(万) | 小红书粉丝(万) | 三线城市票房(百万) |
|------|---------|---------------|---------------|-------------------|
| Travis Scott | 280 | 126.6 | 1.0 | 78.15 |
| Kanye West | 616 | 99.7 | 13.9 | 51.00 |
| Cardi B | 388 | 80.6 | 82.0 | 待预测 |

## 📝 版本日志

### v2.0.0 (2026-01-27)
- ✅ 新增"演唱会票房预测入口"一站式界面
- ✅ 支持动态增删权重参数
- ✅ 支持动态增删锚点数据
- ✅ 新增城市级别选择（一线/二线/三线）
- ✅ 每级城市独立的溢价系数配置
- ✅ 参数本地持久化存储

### v1.0.0 (2026-01-27)
- ✅ 完成核心计算引擎
- ✅ AI智能预测功能
- ✅ 手动计算器
- ✅ Cardi B案例讲解

## 🚀 下一步开发计划

1. **数据源自动抓取**
   - 集成百度指数API
   - 集成网易云音乐爬虫
   - 集成小红书数据接口

2. **历史数据管理**
   - 使用Cloudflare D1存储预测记录
   - 预测准确度追踪

3. **报告导出**
   - PDF报告生成
   - Excel数据导出

4. **多场景支持**
   - 多场巡演预测
   - 场馆规模适配

---

**基于 Comparable 模型 · 专业投委会工具**
